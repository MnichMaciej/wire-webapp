pipeline {
    agent any
    properties([
        parameters {[  
            gitParameter(name: 'TAG',
                        type: 'PT_TAG',
                        defaultValue: 'dev')
        ]}
    ])
    stages {
        stage('Build') {
            steps {
                // script { 
                //     properties([
                //         parameters([
                //             string(
                //                 defaultValue: '', 
                //                 name: 'TAG', 
                //                 trim: true
                //             )
                //         ])
                //     ])
                // }
                 checkout([$class: 'GitSCM',
                          branches: [[name: "${params.TAG}"]],
                          doGenerateSubmoduleConfigurations: false,
                          extensions: [],
                          gitTool: 'Default',
                          submoduleCfg: [],
                          userRemoteConfigs: [[url: 'https://github.com/MnichMaciej/wire-webapp.git']]
                        ])
                
                sh 'ls -al'
                sh 'pwd'
                echo "TAG: ${TAG}"
                // git branch: "refs/tags/${tag}", url: 'https://github.com/MnichMaciej/wire-webapp.git'
            }
        }
    }

}
